{% extends "_layout.twig" %}

{% block content %}
	<div class="text-center">
		<h2>Dashboard PL</h2>
		ID: {{ user.id }}<br/>
		Přihlášený s emailem: {{ user.email }}<br/>
		<a class="btn btn-primary" href="{{ path_for('logout') }}">Odhlásit se</a><br/>
		<br/>
		<br/>
		<h2>PL údaje o sobě</h2>
		<div class="help">
			<h4>
				{{ userCustomHelp }}
			</h4>
		</div>
		{% if userStatus == 'aprooved' %}
			<div class="paymentInfo">
				<h4>Částka: {{ totalPrice }}</h4>
				<h4>Číslo účtu: {{ bankAccount }}</h4>
				<h4>Variabilní symbol: {{ status.variableSymbol }}</h4>
			</div>
		{% endif %}
		{% if userStatus == 'open' %}
			<a class="btn btn-primary" href="{{ path_for('pl-changeDetails') }}">Změnit údaje o sobě</a><br/>
		{% endif %}

		Název patroly: {{ plDetails.getPatrolName }}<br/>
		Křestní jméno: {{ plDetails.getFirstName }}<br/>
		Příjmení: {{ plDetails.getLastName }}<br/>
		Alergie: {{ plDetails.getAllergies }}<br/>
		Datum narození: {{ plDetails.getBirthDate.format('Y-m-d') }}<br/>
		Místo narození: {{ plDetails.getBirthPlace }}<br/>
		Země: {{ plDetails.getCountry }}<br/>
		Gender: {{ plDetails.getGender }}<br/>
		Trvalá adresa: {{ plDetails.getPermanentResidence }}<br/>
		Skautská jednotka: {{ plDetails.getScoutUnit }}<br/>
		Telefoní kontakt: {{ plDetails.getTelephoneNumber }}<br/>
		Email: {{ plDetails.getEmail }}<br/>
		Dieta: {{ plDetails.getFoodPreferences }}<br/>
		Číslo pasu/OP: {{ plDetails.getCardPassportNumber }}<br/>
		Poznámky: {{ plDetails.getNotes }}<br/>
		<br/>
		<h2>Seznam účastníků</h2>
		{% if userStatus == 'open' %}
			<a class="btn btn-primary" href="{{ path_for('pl-addParticipant') }}">Přidat účastníka</a><br/>
		{% endif %}
		{% set count = 1 %}
		{% for participantDetails in allPDetails %}
			{# why here must be full .getFirstName() instead of .firstName like elsewhere? #}
			<p>{{ count }}. účastník {{ participantDetails.getFirstName() }} {{ participantDetails.getLastName() }}
				{% if userStatus == 'open' %}
					<!-- edit --><a class="btn btn-primary"
									href="{{ path_for('p-changeDetails',{'participantId': participantDetails.id}) }}">Edit</a>
					<!-- delete --><a class="btn btn-danger"
									  href="{{ path_for('p-delete',{'participantId': participantDetails.id}) }}">Delete</a>
				{% else %}
					<!-- show --><a class="btn btn-primary"
									href="{{ path_for('p-showDetails',{'participantId': participantDetails.id}) }}">Detail</a>
				{% endif %}

			</p>
			{% set count = count + 1 %}
		{% endfor %}
		<br/>
		<br/>
		{% if userStatus == 'open' %}
			<a class="btn btn-danger" href="{{ path_for('pl-closeRegistration') }}">Uzavřít registraci</a>
		{% endif %}
	</div>
{% endblock %}