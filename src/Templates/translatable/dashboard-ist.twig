{% extends "_layout.twig" %}

{% block content %}
    {% set userStatus = ist.user.status %}
    <div class="card {{ userStatus }}-theme">
        <h2>{{ event.getIstLabel|capitalize }} {% trans %}dashboard.details{% endtrans %}</h2>
        <h4>
            {% include('widgets/userCustomHelp.twig') with {'userRole': 'ist'} %}
        </h4>
        {% if ist.getPayments %}
            <h2>{% trans %}dashboard.paymentInfo{% endtrans %}</h2>
            {% for payment in ist.getPayments %}
                <div class="payment {% if payment.status == 'canceled' %} payment-overdue{% endif %}">
                    {% trans %}dashboard.accountNumber{% endtrans %}: <b>{{ payment.getAccountNumber }}</b><br/>
                    {% trans %}dashboard.amount{% endtrans %}: <b>{{ payment.getPrice }} {{ payment.currency }}</b>
                    <br/>
                    {% trans %}dashboard.variableSymbol{% endtrans %}: <b>{{ payment.getVariableSymbol }}</b><br/>
                    {% trans %}dashboard.paymentNote{% endtrans %}: <b>{{ payment.getNote }}</b><br/>
                    <br/>
                </div>
            {% endfor %}
        {% endif %}

        <div>
            <h2>{% trans %}dashboard.personalInfo{% endtrans %}</h2>
            {% if userStatus == 'open' %}
                <a class="btn btn-small" href="{{ url_for('ist-showDetailsChangeable', {'eventSlug': event.slug}) }}">
                    {% trans %}dashboard.editDetails{% endtrans %}</a><br/><br/>
            {% endif %}
            <div class="text-center">
                {% trans %}detail.firstName{% endtrans %}: <b>{{ ist.getFirstName }}</b><br/>
                {% trans %}detail.surname{% endtrans %}: <b>{{ ist.getLastName }}</b><br/>
                {% trans %}detail.scoutNick{% endtrans %}: <b>{{ ist.getNickname }}</b><br/>
                {% trans %}detail.birthDate{% endtrans %}: <b>{{ ist.getBirthDate.format('d. m. Y') }}</b><br/>
                {% trans %}detail.gender{% endtrans %}: <b>
                    {% if ist.getGender  == 'man' %}
                        {% trans %}changeDetails-ist.genderMan{% endtrans %}
                    {% elseif ist.getGender  == 'woman' %}
                        {% trans %}changeDetails-ist.genderWoman{% endtrans %}
                    {% elseif ist.getGender  == 'other' %}
                        {% trans %}changeDetails-ist.genderOther{% endtrans %}
                    {% endif %}</b><br/>
                {# {% trans %}detail.email{% endtrans %}: <b>{{ ist.getEmail }}</b><br/>
                {% trans %}detail.phone{% endtrans %}: <b>{{ ist.getTelephoneNumber }}</b><br/>#}
                {% trans %}detail.address{% endtrans %}: <b>{{ ist.getPermanentResidence }}</b><br/>
                {% trans %}detail.country{% endtrans %}: <b>
                    {% if ist.getCountry == 'Czech' %}
                        {% trans %}changeDetails-ist.countryCzechRepublic{% endtrans %}
                    {% elseif ist.getCountry == 'other' %}
                        {% trans %}changeDetails-ist.countryOther{% endtrans %}
                    {% endif %}</b><br/>
                {% trans %}detail.unit{% endtrans %}: <b>{{ ist.getScoutUnit }}</b><br/>
                {# {% trans %}detail.thisrtSize{% endtrans %}: <b>{{ ist.getTshirt }}</b><br/>
                {% trans %}detail.foodHeader{% endtrans %}: <b>{{ ist.getFoodPreferences }}</b><br/>#}
                {% trans %}detail.issues{% endtrans %}: <b>{{ ist.getHealthProblems }}</b><br/>
                {#Languages you speak + level: <b>{{ ist.getLanguages }}</b><br/>
                {% trans %}detail.swimSkill{% endtrans %}: <b>{{ ist.getSwimming }}</b><br/> TODO
                {% trans %}detail.driver{% endtrans %}: <b>{{ ist.getDriversLicense }}</b><br/>
                Skills: <b>{{ ist.getSkills }}</b><br/>
                Preferred positions: <b>{{ ist.preferredPosition|join(', ', ' and ') }}</b><br/>#}
                {% trans %}detail.scarf{% endtrans %}: <b>
                    {% if ist.getScarf  == 'yes' %}
                        {% trans %}changeDetails-ist.scarfYes{% endtrans %}
                    {% elseif ist.getScarf  == 'no' %}
                        {% trans %}changeDetails-ist.scarfNo{% endtrans %}
                    {% endif %}</b><br/>
                {% if ist.getUploadedFilename %}
                    {% trans %}detail.uploadedFile{% endtrans %}: <b>Soubor úspěšně nahraný!</b><br/>
                {% endif %}
                {% trans %}detail.notice{% endtrans %}: <b>{{ ist.getNotes }}</b><br/>
                <br/>
            </div>
        </div>

        {% if userStatus == 'open' %}
            <a class="btn btn-small" href="{{ url_for('ist-showCloseRegistration', {'eventSlug': event.slug}) }}">
                {% trans %}dashboard.lockRegistration{% endtrans %}</a>
        {% endif %}
    </div>
{% endblock %}
